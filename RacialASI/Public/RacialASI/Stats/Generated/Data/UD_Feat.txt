new entry "Sailor_Undeath"
type "PassiveData"
data "DisplayName" "7342900a-1e03-4609-a77e-92b5089efabe;1"
data "Description" "h2a86252bg933bg45dega12cg276554b99997;1"
data "Boosts" "Ability(Constitution, 1); Resistance(Poison, Immune); StatusImmunity(SG_Poisoned); StatusImmunity(SG_Disease); Advantage(DeathSavingThrow,); Tag(UNDEAD); UnlockInterrupt(NECROTIC_REDUCTION_Interrupt)"
data "Icon" "PassiveFeature_InuredTo-Undeath"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCreate;OnLongRest"
data "Conditions" "not HasStatus('NECROTIC_REDUCTION', context.Source)"
data "StatsFunctors" "ApplyStatus(NECROTIC_REDUCTION,100,-1)" 
// Last 3 lines from kashai for negative energy interaction.

new entry "Sailor_UndyingFervor"
type "PassiveData"
data "DisplayName" "8044db69-d33f-4f59-8bbf-791ad0bd2f28;1"
data "Description" "a63dce7f-a907-4a57-88de-dd05fa525363;1"
data "DescriptionParams" "RegainHitPoints(1d12)"
data "Icon" "PassiveFeature_Generic_Death"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCreate;OnLongRest"
data "StatsFunctors" "ApplyStatus(SELF,UNDYING_FERVOR,100,-1)"

new entry "UNDYING_FERVOR"
type "StatusData"
data "StatusType" "BOOST"
using "SURVIVAL_INSTINCT"
data "DisplayName" "8044db69-d33f-4f59-8bbf-791ad0bd2f28;1"
data "Description" "a63dce7f-a907-4a57-88de-dd05fa525363;1"
data "DescriptionParams" "RegainHitPoints(1d12)"
data "Icon" "PassiveFeature_Generic_Death"
data "SoundLoop" ""
data "SoundStop" ""
data "StackId" "UNDYING_FERVOR"
data "Boosts" "DownedStatus(UNDYING_FERVOR_DOWNED,5)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusEffect" ""

new entry "UNDYING_FERVOR_DOWNED"
type "StatusData"
data "StatusType" "DOWNED"
using "SURVIVAL_INSTINCT_DOWNED"
data "DisplayName" "8044db69-d33f-4f59-8bbf-791ad0bd2f28;1"
data "Icon" "PassiveFeature_RelentlessEndurance"
data "OnApplyFunctors" "RemoveStatus(UNDYING_FERVOR);RegainHitPoints(1d12,Guaranteed)"
data "StatusGroups" "SG_Incapacitated"
data "ApplyEffect" ""

//Necrotic energy heal and reduction by kashai
new entry "NECROTIC_REGENERATION_TECHNICAL"
type "PassiveData"
data "DisplayName" "ba8b4d89-90de-4d95-9a22-7f60d5028f8f;1"
data "StatsFunctorContext" "OnDamaged"
data "Properties" "IsHidden"
data "Conditions" "IsDamageTypeNecrotic()"
data "StatsFunctors" "RegainHitPoints(1d6+ConstitutionModifier+1)"

new entry "NECROTIC_REGENERATION"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "ba8b4d89-90de-4d95-9a22-7f60d5028f8f;1"
data "Description" "8bd48253-bd15-4019-ac8e-f186b76d9389;1"
data "StatusPropertyFlags" "DisablePortraitIndicator;DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
data "Icon" "GenericIcon_DamageType_Necrotic"
data "StackID" "NECROTIC_REGENERATION"
data "OnApplyFunctors" "RegainHitPoints(1d6+ConstitutionModifier)"

new entry "NECROTIC_REDUCTION"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "ba8b4d89-90de-4d95-9a22-7f60d5028f8f;1"
data "Description" "8bd48253-bd15-4019-ac8e-f186b76d9389;1"
data "StatusPropertyFlags" "DisablePortraitIndicator;DisableOverhead;DisableCombatlog;ApplyToDead;IgnoreResting"
data "Icon" "GenericIcon_DamageType_Necrotic"
data "OnApplyConditions" ""
data "StackID" "NECROTIC_REDUCTION"
data "StackType" ""
data "Boosts" "DamageReduction(Necrotic,Threshold,1000)"
data "StatusGroups" "SG_RemoveOnRespec"
data "Passives" "NECROTIC_REGENERATION_TECHNICAL"

new entry "NECROTIC_REDUCTION_Interrupt"
type "InterruptData"
data "DisplayName" "ba8b4d89-90de-4d95-9a22-7f60d5028f8f;1"
data "Description" "8bd48253-bd15-4019-ac8e-f186b76d9389;1"
data "ExtraDescription" ""
data "Icon" "GenericIcon_DamageType_Necrotic"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Target,context.Observer) and SpellDamageTypeIs(DamageType.Necrotic)"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-1000,Necrotic);IF(not IsCantrip() and not(IsSpellChildOrVariantFromContext('Target_ChillTouch'))):ApplyStatus(NECROTIC_REGENERATION,100,0)"
data "Cost" ""
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "HasPassive("Sailor_Undeath", context.Source) and not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied"